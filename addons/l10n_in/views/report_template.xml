<odoo>
    <!-- External layouts styles -->

    <template id="l10n_in_external_layout_background" inherit_id="web.external_layout_background"  primary="True">
        <xpath expr="//img[@t-if='company.logo']" position="replace">
                <img t-if="l10n_in_gstin_partner.image" t-att-src="'data:image/png;base64,%s' % to_text(l10n_in_gstin_partner.image)" class="pull-left"/>
        </xpath>
        <xpath expr="//strong[@t-field='company.partner_id.name']" position="replace">
            <strong t-field="l10n_in_gstin_partner.name"/>
        </xpath>
        <xpath expr="//span[@t-field='company.partner_id']" position="replace">
            <strong t-esc="l10n_in_gstin_partner" t-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'/>
        </xpath>
        <xpath expr="//li[@t-if='company.phone']" position="replace">
            <li t-if="l10n_in_gstin_partner.phone"><i class="fa fa-phone" role="img" aria-label="Phone" title="Phone"/> <span t-field="l10n_in_gstin_partner.phone"/></li>
        </xpath>
        <xpath expr="//li[@t-if='company.email']" position="replace">
            <li t-if="l10n_in_gstin_partner.email"><i class="fa fa-at" role="img" aria-label="Email" title="Email"/> <span t-field="l10n_in_gstin_partner.email"/></li>
        </xpath>
        <xpath expr="//li[@t-if='company.website']" position="replace">
            <li t-if="l10n_in_gstin_partner.website"><i class="fa fa-globe" role="img" aria-label="Website" title="Website"/> <span t-field="l10n_in_gstin_partner.website"/></li>
        </xpath>
        <xpath expr="//li[@t-if='company.vat']" position="replace">
            <li t-if="l10n_in_gstin_partner.vat"><i class="fa fa-building-o" role="img" aria-label="Fiscal number"/><t t-esc="l10n_in_gstin_partner.country_id.vat_label or 'TIN'"/>: <span t-field="l10n_in_gstin_partner.vat"/></li>
        </xpath>
    </template>

    <template id="l10n_in_external_layout_boxed" inherit_id="web.external_layout_boxed"  primary="True">
        <xpath expr="//img[@t-if='company.logo']" position="replace">
            <img t-if="l10n_in_gstin_partner.image" t-att-src="'data:image/png;base64,%s' % to_text(l10n_in_gstin_partner.image)" alt="Logo"/>
        </xpath>
        <xpath expr="//span[@t-field='company.partner_id']" position="replace">
            <span class="company_address" t-esc="l10n_in_gstin_partner" t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": true}'/>
        </xpath>
        <xpath expr="//li[@t-if='company.phone']" position="replace">
            <li t-if="l10n_in_gstin_partner.phone">Tel: <span t-field="l10n_in_gstin_partner.phone"/></li>
        </xpath>
        <xpath expr="//li[@t-if='company.email']" position="replace">
            <li t-if="l10n_in_gstin_partner.email">Mail: <span t-field="l10n_in_gstin_partner.email"/></li>
        </xpath>
        <xpath expr="//li[@t-if='company.website']" position="replace">
            <li t-if="l10n_in_gstin_partner.website">Web: <span t-field="l10n_in_gstin_partner.website"/></li>
        </xpath>
        <xpath expr="//li[@t-if='company.vat']" position="replace">
            <li t-if="l10n_in_gstin_partner.vat"><t t-esc="l10n_in_gstin_partner.country_id.vat_label or 'TIN'"/>: <span t-field="l10n_in_gstin_partner.vat"/></li>
        </xpath>
    </template>

    <template id="l10n_in_external_layout_clean" inherit_id="web.external_layout_clean"  primary="True">
        <xpath expr="//img[@t-if='company.logo']" position="replace">
            <img t-if="l10n_in_gstin_partner.image" t-att-src="'data:image/png;base64,%s' % to_text(l10n_in_gstin_partner.image)" alt="Logo"/>
        </xpath>
        <xpath expr="//li[@t-if='company.name']" position="replace">
            <li t-if="l10n_in_gstin_partner.name"><span t-field="l10n_in_gstin_partner.name"/></li>
        </xpath>
        <xpath expr="//li[@t-if='company.vat']" position="replace">
            <li t-if="l10n_in_gstin_partner.vat"><t t-esc="l10n_in_gstin_partner.country_id.vat_label or 'TIN'"/>: <span t-field="l10n_in_gstin_partner.vat"/></li>
        </xpath>
        <xpath expr="//li[@t-if='company.phone']" position="replace">
            <li t-if="l10n_in_gstin_partner.phone">Tel: <span t-field="l10n_in_gstin_partner.phone"/></li>
        </xpath>
        <xpath expr="//li[@t-if='company.email']" position="replace">
            <li t-if="l10n_in_gstin_partner.email"><span t-field="l10n_in_gstin_partner.email"/></li>
        </xpath>
        <xpath expr="//li[@t-if='company.website']" position="replace">
            <li t-if="l10n_in_gstin_partner.website"><span t-field="l10n_in_gstin_partner.website"/></li>
        </xpath>
    </template>

    <template id="l10n_in_external_layout_standard" inherit_id="web.external_layout_standard"  primary="True">
        <xpath expr="//img[@t-if='company.logo']" position="replace">
            <img t-if="l10n_in_gstin_partner.image" t-att-src="'data:image/png;base64,%s' % to_text(l10n_in_gstin_partner.image)" style="max-height: 45px;" alt="Logo"/>
        </xpath>
        <xpath expr="//div[@t-if='company.logo or company.report_header']" position="attributes">
            <attribute name="t-if">l10n_in_gstin_partner.image or company.report_header</attribute>
        </xpath> 
        <xpath expr="//span[@t-field='company.partner_id']" position="replace">
            <span t-esc="l10n_in_gstin_partner" t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": true}' style="border-bottom: 1px solid black; display:inline-block;"/>
        </xpath>
        <xpath expr="//li[@t-if='company.phone']" position="replace">
            <li t-if="l10n_in_gstin_partner.phone">Phone: <span t-field="l10n_in_gstin_partner.phone"/></li>
        </xpath>
        <xpath expr="//li[@t-if='company.email']" position="replace">
           <li t-if="l10n_in_gstin_partner.email">Email: <span t-field="l10n_in_gstin_partner.email"/></li>
        </xpath>
        <xpath expr="//li[@t-if='company.website']" position="replace">
            <li t-if="l10n_in_gstin_partner.website">Web: <span t-field="l10n_in_gstin_partner.website"/></li>
        </xpath>
        <xpath expr="//li[@t-if='company.vat']" position="replace">
             <li t-if="l10n_in_gstin_partner.vat"><t t-esc="l10n_in_gstin_partner.country_id.vat_label or 'TIN'"/>: <span t-field="l10n_in_gstin_partner.vat"/></li>
        </xpath>
    </template>

    <template id="l10n_in_external_layout">

        <!-- Multicompany -->
        <t t-if="not o and doc">
            <t t-set="o" t-value="doc"/>
        </t>

        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id.sudo()"/>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"/>
        </t>

        <t name="gstin_parnter" t-if="o and 'l10n_in_gstin_partner_id' in o">
            <t t-set="l10n_in_gstin_partner" t-value="o.l10n_in_gstin_partner_id.sudo()"/>
        </t>
        <t name="company_partner" t-if="not o or not 'l10n_in_gstin_partner_id' in o">
            <t t-set="l10n_in_gstin_partner" t-value="company.partner_id"/>
        </t>

        <t t-if="company.external_report_layout == 'background'">
            <t t-call="l10n_in.l10n_in_external_layout_background"><t t-raw="0"/></t>
        </t>
        <t t-if="company.external_report_layout == 'boxed'">
            <t t-call="l10n_in.l10n_in_external_layout_boxed"><t t-raw="0"/></t>
        </t>
        <t t-if="company.external_report_layout == 'clean'">
            <t t-call="l10n_in.l10n_in_external_layout_clean"><t t-raw="0"/></t>
        </t>
        <t t-if="company.external_report_layout in (False, 'standard')">
            <t t-call="l10n_in.l10n_in_external_layout_standard"><t t-raw="0"/></t>
        </t>
    </template>
</odoo>
