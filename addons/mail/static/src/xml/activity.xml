<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="mail.activity_items">
        <div class="o_thread_date_separator o_border_dashed" data-toggle="collapse" data-target="#o_chatter_planned_activities">
            <span class="o_thread_date btn">
                <i class="fa fa-fw fa-caret-down"/>
                Planned activities
                <small class="o_chatter_planned_activities_summary ml8">
                    <span class="label img-circle label-danger"><t t-esc="nbOverdueActivities"/></span>
                    <span class="label img-circle label-warning"><t t-esc="nbTodayActivities"/></span>
                    <span class="label img-circle label-success"><t t-esc="nbPlannedActivities"/></span>
                </small>
            </span>
        </div>
        <div id="o_chatter_planned_activities" class="collapse in">
            <t t-foreach="activities" t-as="activity">
                <div class="o_thread_message" style="margin-bottom: 10px">
                    <div class="o_thread_message_sidebar">
                        <div class="o_avatar_stack">
                            <img t-attf-src="/web/image#{activity.user_id[0] >= 0 ? ('/res.users/' + activity.user_id[0] + '/image_small') : ''}" class="o_thread_message_avatar img-circle mb8" t-att-title="activity.create_uid[1]"/>
                            <i t-att-class="'o_avatar_icon fa ' + activity.icon + ' bg-' + (activity.state == 'planned'? 'success' : (activity.state == 'today'? 'warning' : 'danger')) + '-full'"
                               t-att-title="activity.activity_type_id[1]"/>
                        </div>
                    </div>
                    <div class="o_thread_message_core">
                        <div class="o_mail_info">
                            <strong><span t-attf-class="o_activity_date o_activity_color_#{activity.state}"><t t-esc="activity.label_delay" /></span></strong>:
                            <strong t-if="activity.summary"> &#8220;<t t-esc="activity.summary"/>&#8221;</strong>
                            <strong t-if="!activity.summary"> <t t-esc="activity.activity_type_id[1]" /></strong>
                            <em> for </em>
                            <t t-esc="activity.user_id[1]" />
                            <a class="btn btn-link btn-info text-muted collapsed o_activity_info ml4" role="button" data-toggle="collapse" t-attf-data-target="#o_chatter_activity_info_#{activity.id}">
                                <i class="fa fa-info-circle"></i>
                            </a>
                            <div class="o_thread_message_collapse collapse" t-attf-id="o_chatter_activity_info_#{activity.id}">
                                <dl class="dl-horizontal well">
                                    <dt>Activity type</dt>
                                    <dd class="mb8">
                                        <t t-esc="activity.activity_type_id[1]"/>
                                    </dd>
                                    <dt>Created on</dt>
                                    <dd class="mb8">
                                        <t t-esc="moment(activity.create_date)"/>
                                    </dd>
                                    <dt>Assigned to</dt>
                                    <dd class="mb8">
                                        <img t-attf-src="/web/image#{activity.user_id[0] >= 0 ? ('/res.users/' + activity.user_id[0] + '/image_small') : ''}" height="18" width="18" class="img-circle mr4" t-att-title="activity.create_uid[1]"/>
                                        <b><t t-esc="activity.user_id[1]"/></b>
                                        <em>, due on </em><span t-attf-class="o_activity_color_#{activity.state}"><t t-esc="moment(activity.date_deadline)"/></span>
                                    </dd>
                                </dl>
                            </div>
                        </div>
                        <div t-if="activity.note" class="o_thread_message_note small">
                            <t t-raw="activity.note"/>
                        </div>
                        <div class="o_thread_message_tools btn-group">
                            <a href="#" class="btn btn-link btn-success text-muted btn-sm o_activity_done o_activity_link mr8" t-att-data-activity-id="activity.id" t-att-data-previous-activity-type-id="activity.activity_type_id[0]" data-toggle="popover">
                                <i class="fa fa-check"/> Mark Done
                            </a>
                            <a href="#" class="btn btn-link btn-default text-muted btn-sm o_activity_edit o_activity_link" t-att-data-activity-id="activity.id">
                                <i class="fa fa-pencil"/> Edit
                            </a>
                            <a href="#" class="btn btn-link btn-sm btn-danger text-muted o_activity_unlink o_activity_link" t-att-data-activity-id="activity.id">
                                <i class="fa fa-times"/> Cancel
                            </a>
                        </div>
                    </div>
                </div>
            </t>
        </div>
    </t>
    <t t-name="mail.activity_feedback_form">
        <div>
            <textarea class="form-control" rows="3" id="activity_feedback" placeholder="Write Feedback"/>
            <div class="mt8">
                <button type="button" class="btn btn-xs btn-primary o_activity_popover_done_next" t-att-data-previous-activity-type-id="previous_activity_type_id">
                    Done &amp; Schedule Next</button>
                <button type="button" class="btn btn-xs btn-primary o_activity_popover_done">
                    Done</button>
                <button type="button" class="btn btn-xs btn-link o_activity_popover_discard">
                    Discard</button>
            </div>
        </div>
    </t>
    <t t-name="mail.activity_composer_form">
        <div class="o_chat_composer o_activity_tab_contant">
            <a class="o_exapand_activity"><i class="fa fa-expand"></i></a>
            <div class="o_group">
                <table class="o_group o_inner_group o_group_col_5">
                    <tbody>
                        <tr>
                            <td class="o_td_label"><label class="o_form_label">Activity</label></td>
                            <td class="activity_type_select_m2o" />
                        </tr>
                        <tr>
                            <td class="o_td_label"><label class="o_form_label">Summary</label></td>
                            <td><input class="o_input o_activity_summary" type="text" placeholder="e.g. Discuss proposal"/></td>
                        </tr>
                    </tbody>
                </table>
                <table class="o_group o_inner_group o_group_col_6 o_meeting_group">
                    <tbody>
                        <tr>
                            <td class="o_td_label"><label class="o_form_label">Due Date</label></td>
                            <td class="date_picker_activity_due_date"/>
                        </tr>
                        <tr>
                            <td class="o_td_label"><label class="o_form_label">Assigned to</label></td>
                            <td class="assigned_user_select_m2o"/>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="o_composer_container">
                <img t-if="widget.avatarURL" class="o_thread_message_sidebar o_chatter_avatar img-circle" t-att-src="widget.avatarURL"/>
                
                <div class="o_composer">
                    <div class="o_composer_input">
                        <textarea class="o_input o_composer_activity_text_field" placeholder="Write something..." tabindex="2" ></textarea>
                    </div>
                </div>
                <div class="o_composer_send">
                    <button class="btn btn-sm btn-primary o_composer_button_meeting o_hidden" tabindex="3" type="button">
                        <span class="hidden-xs">Schedule Meeting</span>
                        <span class="visible-xs"><i class="fa fa-clock-o"/></span>
                    </button>
                    <button class="btn btn-sm btn-primary o_composer_button_activity" tabindex="3" type="button">
                        <span class="hidden-xs">Schedule Activity</span>
                        <span class="visible-xs"><i class="fa fa-clock-o"/></span>
                    </button>
                    <button class="btn btn-sm btn-primary o_composer_button_done" tabindex="4" type="button">
                        <span class="hidden-xs">Mark as Done</span>
                        <span class="visible-xs"><i class="fa fa-check-square-o"/></span>
                    </button>
                    <button class="btn btn-sm btn-default o_composer_button_discard" tabindex="5" type="button">
                        <span class="hidden-xs">Discard</span>
                        <span class="visible-xs"><i class="fa fa-times"/></span>
                    </button>
                </div>
            </div>
        </div>
    </t>
</templates>
